<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 700">
  <defs>
    <style>
      .actor { fill: #FFE8CC; stroke: #FF9900; stroke-width: 2; }
      .box { fill: #E8F4F8; stroke: #0066CC; stroke-width: 2; }
      .text { font-family: Arial, sans-serif; font-size: 13px; fill: #000; }
      .title { font-size: 18px; font-weight: bold; }
      .arrow { stroke: #0066CC; stroke-width: 2; marker-end: url(#arrowhead); }
      .dashed { stroke-dasharray: 5,5; }
      .label { font-size: 11px; fill: #333; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#0066CC" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="500" y="30" class="text title" text-anchor="middle">EduPlatform - Sequence Diagram: Assignment Submission</text>
  
  <!-- Actors and Components -->
  <ellipse cx="100" cy="70" rx="60" ry="30" class="actor"/>
  <text x="100" y="75" class="text" text-anchor="middle" font-weight="bold">Student</text>
  
  <rect x="240" y="50" width="120" height="40" class="box" rx="5"/>
  <text x="300" y="75" class="text" text-anchor="middle" font-weight="bold">Frontend</text>
  
  <rect x="480" y="50" width="120" height="40" class="box" rx="5"/>
  <text x="540" y="75" class="text" text-anchor="middle" font-weight="bold">Backend API</text>
  
  <rect x="720" y="50" width="120" height="40" class="box" rx="5"/>
  <text x="780" y="75" class="text" text-anchor="middle" font-weight="bold">Database</text>
  
  <!-- Lifelines -->
  <line x1="100" y1="100" x2="100" y2="650" class="dashed" stroke="#999"/>
  <line x1="300" y1="100" x2="300" y2="650" class="dashed" stroke="#999"/>
  <line x1="540" y1="100" x2="540" y2="650" class="dashed" stroke="#999"/>
  <line x1="780" y1="100" x2="780" y2="650" class="dashed" stroke="#999"/>
  
  <!-- Sequence Steps -->
  <!-- Step 1: Student uploads file -->
  <path d="M 100 130 L 300 150" class="arrow"/>
  <text x="150" y="140" class="label">1. Upload Assignment</text>
  
  <!-- Step 2: Frontend sends POST -->
  <path d="M 300 180 L 540 200" class="arrow"/>
  <text x="380" y="190" class="label">2. POST /api/submissions</text>
  
  <!-- Step 3: Backend validates token -->
  <rect x="480" y="210" width="120" height="30" fill="#FFF9E6" stroke="#FF9900" stroke-width="1" rx="3"/>
  <text x="540" y="230" class="text" text-anchor="middle" font-size="11">Validate JWT Token</text>
  
  <!-- Step 4: Backend saves to database -->
  <path d="M 540 250 L 780 270" class="arrow"/>
  <text x="630" y="260" class="label">3. INSERT INTO submissions</text>
  
  <!-- Step 5: Database response -->
  <path d="M 780 300 L 540 320" class="arrow dashed"/>
  <text x="630" y="310" class="label">4. ID: 101 (Created)</text>
  
  <!-- Step 6: Backend saves file -->
  <rect x="480" y="330" width="120" height="30" fill="#FFF9E6" stroke="#FF9900" stroke-width="1" rx="3"/>
  <text x="540" y="350" class="text" text-anchor="middle" font-size="11">Save File to Storage</text>
  
  <!-- Step 7: Backend responds to frontend -->
  <path d="M 540 380 L 300 400" class="arrow dashed"/>
  <text x="380" y="390" class="label">5. 201 Created (JSON)</text>
  
  <!-- Step 8: Frontend shows success -->
  <path d="M 300 430 L 100 450" class="arrow dashed"/>
  <text x="150" y="440" class="label">6. "Success" Message</text>
  
  <!-- Response box -->
  <rect x="50" y="460" width="500" height="120" fill="#E8F8E8" stroke="#00AA00" stroke-width="1" rx="5"/>
  <text x="60" y="480" class="text" font-weight="bold">Response Payload (201 Created):</text>
  <text x="70" y="505" class="text" font-family="monospace" font-size="11">{</text>
  <text x="85" y="525" class="text" font-family="monospace" font-size="11">"id": 101,</text>
  <text x="85" y="545" class="text" font-family="monospace" font-size="11">"student_id": 5,</text>
  <text x="85" y="565" class="text" font-family="monospace" font-size="11">"file_path": "/uploads/assignment_101.pdf"</text>
  <text x="70" y="585" class="text" font-family="monospace" font-size="11">}</text>
</svg>
